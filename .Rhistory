setwd('C:\Users\YetSun\Box\nicole\170526 Tau UV NOD HEP')
setwd(paste(strsplit('C:\Users\YetSun\Box\nicole\170526 Tau UV NOD HEP', '\\'), '/'))
list.files(path)
path <- "C:/Users/YetSun/Box/nicole/170526 Tau UV NOD HEP"
list.files(path)
ds <- read.csv(data.csv)
data.csv <- 'TitrationTauNODHEP2OD6ODClean.csv'
ds <- read.csv(paste(path, data.csv, sep = '/'))
head()
head(ds)
devtools::install_github('yanxianUCSB/yxplot')
library(ggplot2)
library(yxplot)
str(ds)
data.csv <- 'TitrationTauNODHEP2OD6ODClean_yx.csv'
ds <- read.csv(paste(path, data.csv, sep = '/'))
head(ds)
str(ds)
devtools::install_github('yanxianUCSB/yxplot')
library(ggplot2)
library(yxplot)
pipette.correct <- c(2.85, 1.78) / c(3.41, 1.71)
pipette.correct
pipette.correct <- c(2.85, 1.18) / c(3.41, 1.71)
pipette.correct <- c(2.785, 1.18) / c(3.41, 1.71)
pipette.correct
head(ds)
pip.set <- c(3.41, 1.71)
pip.cal <- c(2.785, 1.18)
ds <- read.csv(paste(path, data.csv, sep = '/'))
pip.cor <- pip.cal / pip.set
lapply(pip.cor, function(pcor) {
ds$pip.cor[which(abs(ds$Added.Vol. - pcor) < 0.5)] = pcor
})
pcor
pip.cor
lapply(pip.set, function(pcor) {
ds$pip.cor[which(abs(ds$Added.Vol. - pcor) < 0.5)] = pcor
})
head(ds)
pip.cor <- pip.cal / pip.set
lapply(1:length(pip.set), function(i) {
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] = pip.cor[i]
})
i <- 1
which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)
lapply(1:length(pip.set), function(i) {
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] <-  pip.cor[i]
})
pip.cor[i]
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] <-  pip.cor[i]
lapply(1:length(pip.set), function(i) {
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] <-  pip.cor[i]
})
head(ds)
for(i in 1:length(pip.set)) {
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] <-  pip.cor[i]
}
head(ds)
pip.set <- c( 3.41, 1.71)
pip.cal <- c( 2.785, 1.18)
ds <- read.csv(paste(path, data.csv, sep = '/'))
pip.cor <- pip.cal / pip.set
for(i in 1:length(pip.set)) {
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] <-  pip.cor[i]
}
head(ds)
str(ds)
head(ds)
ds <- with(ds, {
pip.cor[is.na(pip.cor)] <- 1
})
head(ds)
pip.cal <- c( 2.785, 1.18)
ds <- read.csv(paste(path, data.csv, sep = '/'))
pip.cor <- pip.cal / pip.set
for(i in 1:length(pip.set)) {
ds$pip.cor[which(abs(ds$Added.Vol. - pip.set[i]) < 0.5)] <-  pip.cor[i]
}
with(ds, {
pip.cor[is.na(pip.cor)] <- 1
})
head(ds)
with(ds, {
ds$pip.cor[is.na(pip.cor)] <- 1
})
head(ds)
ds$pip.cor[is.na(ds$pip.cor)] <- 1
head(ds)
str(ds)
head(ds)
library(dplyr)
ds2 <- ds %>% group_by(Hep, Trial) %>% mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor))
ds2
head(ds2)
head(ds2)
head(ds2)
head(ds2[,4:10])
head(ds2[,4:13])
head(ds2[,6:13])
head(ds2[,10:13])
ds <- ds %>% group_by(Hep, Trial) %>% mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor))
head(ds[,10:13])
str(ds)
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = Charge.Designed / cumsum(Added.Vol.) * vol.cumsum)
names(ds)
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = Charge.Designed / cumsum(Added.Vol.) * vol.cumsum) %>%
ungroup()
head(ds)
"/" <- function(x,y) ifelse(y==0,0,base:::"/"(x,y))
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = Charge.Designed / cumsum(Added.Vol.) * vol.cumsum) %>%
ungroup()
ds$charge.cor
View(`/`)
View(`/`)
rm '/'
rm(list = '/')
zeroDivide <- function(x,y) ifelse(y==0,0,base:::"/"(x,y))
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = zeroDivide(Charge.Designed, cumsum(Added.Vol.)) * vol.cumsum) %>%
ungroup()
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = zeroDivide(Charge.Designed, cumsum(Added.Vol.)) * vol.cumsum) %>%
ungroup()
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = zeroDivide(Charge.Designed, cumsum(Added.Vol.)) * vol.cumsum) %>%
ungroup()
head(ds)
names(ds)
ds <- ds %>%
group_by(Hep, Trial) %>%
mutate(vol.cumsum = cumsum(Added.Vol. * pip.cor)) %>%
mutate(charge.cor = zeroDivide(Charge.Designed, cumsum(Added.Vol.)) * vol.cumsum) %>%
ungroup() %>%
group_by(Hep, Charge.Designed) %>%
mutate(abs.mean = mean(Abs500), abs.sd = sd(Abs500)) %>%
ungroup()
names(ds)
head(ds)
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(color = Hep)
g
g <- g + geom_line(color = Hep)
g <- g + geom_line(aes(col = Hep))
g
g <- g + geom_ribbon(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd)
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd))
g
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, col = Hep))
g
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep))
g
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g
g <- g + geom_line(aes(col = Hep))
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(aes(col = Hep))
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g
devtools::install_github('yanxianUCSB/yxplot')
library(yxplot)
library(ggplot2)
g <- theme.title.text.1(g)
g
g <- theme.title.text.2(g)
g
g <- theme.title.text.1(g)
g
g <- g + geom_line(aes(col = Hep), lwd = 2)
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(aes(col = Hep), lwd = 2)
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g <- theme.title.text.1(g)
g
g <- g + labs(xlab = 'Anion:Cation')
g
g <- g + labs(x = 'Anion:Cation')
g
g <- g + guides(guide_legend(title = 'Anion'))
g
g <- g + labs(x = 'Anion:Cation',
y = 'Turbidity',
color = 'polyanion')
g
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(aes(col = Hep), lwd = 2)
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g <- g + labs(x = 'Anion:Cation',
y = 'Turbidity',
color = 'polyanion')
g <- g + guides(guide_legend(title = 'Anion'))
g
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(aes(col = Hep), lwd = 2)
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g <- g + labs(x = 'Anion:Cation',
y = 'Turbidity',
color = 'polyanion')
g
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(aes(col = Hep), lwd = 2)
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g <- g + labs(x = 'Anion:Cation',
y = 'Turbidity',
fill = 'polyanion')
g
g <- g + labs(x = 'Anion:Cation',
y = 'Turbidity',
fill = 'polyanion',
color = 'polyanion')
g
g <- ggplot(ds, aes(x = charge.cor, y = abs.mean, group = Hep))
g <- g + geom_line(aes(col = Hep), lwd = 2)
g <- g + geom_ribbon(aes(ymax = abs.mean + abs.sd, ymin = abs.mean - abs.sd, fill = Hep), alpha = 0.4)
g <- g + labs(x = 'Anion:Cation',
y = 'Turbidity',
fill = 'polyanion',
color = 'polyanion')
g
g <- theme.title.text.1(g)
g
ggsave('plot.png', width = 8, height = 6)
ggsave(paste(path, 'plot.png', sep = '/'), width = 8, height = 6)
ggsave(paste(path, 'plot.png', sep = '/'), width = 6, height = 6)
ggsave(paste(path, 'plot.png', sep = '/'), width = 5, height = 5)
x <- seq(0, 1, 0.0001)
plot(data.frame(x = x, y = x* log(x)))
ylab('x*lnx')
plot(data.frame(x = x, y = x* log(x)), title = 'X*lnX')
plot(data.frame(x = x, y = x* log(x)), main = 'X*lnX')
plot(data.frame(x = x, y = x* log(x)), main = 'Y = X*lnX')
source('~/.active-rstudio-document', echo=TRUE)
g
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
ds <- expand.grid(x = x, k = k)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
plot(x, y)
plot(ds$x, ds$y)
plot(ds)
x  <- seq(0, 1, 0.01)
k <- seq(-100, 100, 1)
ds <- expand.grid(x = x, k = k)
ds$y <-  with(ds, log(x / (1-x)) + k * sqrt(x))
plot(ds)
x  <- seq(0, 1, 0.01)
k <- 1
ds <- expand.grid(x = x, k = k)
ds$y <-  with(ds, log(x / (1-x)) + k * sqrt(x))
plot(ds)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
ds$y <- log(ds$x / (1 - ds$x)) + ds$k * sqrt(ds$x)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
ds <- expand.grid(x = x, k = k)
ds$dy <- log(ds$x / (1 - ds$x)) + ds$k * sqrt(ds$x)
ds$y <- with(ds, x * log(x) + (1-x) * log(1-x) + k * sqrt(x))
library(ggplot2)
g <- ggplot(ds, aes(x = x, y = k, fill = y)) + geom_tile() +
scale_fill_gradientn(colors = jet.colors(7))
g
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x)) + 5*x)
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x)) + 5*x))
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x)) + 5*x
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x) + 5*x)
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x) + 5*x, theta = 'x')
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x) + 5*x, theta = 'x', rho = c(k))
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x) + 5*x, theta = c(x))
ds$dy.num <- numericDeriv(y ~ x * log(x) + (1-x) * log(1-x) + k * sqrt(x) + 5*x, theta = c('x'))
source('~/github/vomodel/test.R')
getwd()
setwd)
setwd(./vom)
setwd('./vomodel/')
source('~/github/vomodel/test.R')
